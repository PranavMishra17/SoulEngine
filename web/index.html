<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SoulEngine - Memory-Driven NPCs for Games</title>
  <meta name="description" content="Create game characters that remember, evolve, and speak. Memory-driven NPCs with voice interaction and real-time personality evolution.">
  <meta name="theme-color" content="#0d0d0d">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" href="/img/icon.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="/css/design-system.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/pages.css">
  <link rel="stylesheet" href="/css/pages-app.css">
  <link rel="stylesheet" href="/css/conversation-modes.css">
  
  <!-- VAD Web -->
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/ort.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.22/dist/bundle.min.js"></script>
  
  <!-- Supabase SDK for Auth -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div id="app">
    <!-- Navigation -->
    <nav class="main-nav" id="main-nav">
      <div class="nav-brand">
        <a href="/" class="brand-link">
          <img src="/img/icon.png" alt="SoulEngine" class="brand-icon-img">
          <span class="brand-text">Soul<span class="brand-accent">Engine</span></span>
        </a>
      </div>
      <div class="nav-links" id="nav-links"></div>
      <div class="nav-actions">
        <div class="nav-social-links">
          <a href="https://github.com/PranavMishra17/SoulEngine" target="_blank" rel="noopener" class="nav-social-link" title="GitHub">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          </a>
          <a href="https://github.com/sponsors/PranavMishra17" target="_blank" rel="noopener" class="nav-social-link" title="Sponsor">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
          </a>
        </div>
        
        <!-- Auth Container - dynamically updated based on auth state -->
        <div class="nav-auth" id="nav-auth">
          <!-- Unauthenticated state (default) -->
          <div class="auth-buttons" id="auth-buttons">
            <button class="btn btn-ghost btn-sm" id="btn-sign-in">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="auth-icon">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                <polyline points="10 17 15 12 10 7"></polyline>
                <line x1="15" y1="12" x2="3" y2="12"></line>
              </svg>
              Sign In
            </button>
          </div>
          
          <!-- Authenticated state (hidden by default) -->
          <div class="account-menu" id="account-menu" style="display: none;">
            <button class="account-trigger" id="account-trigger">
              <div class="account-avatar" id="account-avatar">
                <span class="avatar-placeholder">U</span>
              </div>
              <span class="account-name" id="account-name">User</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="chevron-icon">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
            <div class="account-dropdown" id="account-dropdown">
              <div class="dropdown-header">
                <span class="dropdown-email" id="dropdown-email">user@example.com</span>
              </div>
              <div class="dropdown-divider"></div>
              <a href="/projects" class="dropdown-item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                </svg>
                My Projects
              </a>
              <button class="dropdown-item dropdown-item-danger" id="btn-sign-out">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                  <polyline points="16 17 21 12 16 7"></polyline>
                  <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Sign Out
              </button>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main content area -->
    <main id="main-content"></main>

    <!-- Toast notifications -->
    <div id="toast-container" class="toast-container"></div>
  </div>

  <!-- Grain overlay for texture -->
  <div class="grain-overlay"></div>

  <!-- Templates -->
  <template id="template-landing">
    <div class="landing-page">
      <!-- Hero Section -->
      <section class="hero">
        <div class="hero-bg">
          <div class="brain-canvas-container">
            <canvas id="brain-canvas"></canvas>
          </div>
        </div>
        
        <div class="hero-content">
          <div class="hero-badge">
            <span class="badge badge-accent">Open Source</span>
            <span class="badge badge-outline">v2.0</span>
          </div>
          <h1 class="hero-title">
            NPCs with <span class="highlight highlight-core">memory</span>,
            <span class="highlight highlight-persona">motive</span>, and
            <span class="highlight highlight-mcp">agency</span>
          </h1>
          <p class="hero-subtitle">
            Stateless NPC intelligence with layered memory cycles, personality evolution,
            multi-modal voice interaction, and autonomous decision-making.
          </p>
          <div class="hero-actions">
            <button class="btn btn-primary btn-lg" id="btn-create-project">
              <span class="icon">+</span>
              Create Project
            </button>
            <button class="btn btn-outline btn-lg" id="btn-view-projects">
              <span class="icon">&#9643;</span>
              View Projects
            </button>
          </div>
        </div>
        
        <!-- Pillar Tabs -->
        <div class="pillar-tabs-container">
          <div class="pillar-tab" data-pillar="core">
            <span class="pillar-tab-icon">&#9672;</span>
            <span class="pillar-tab-label">Core Anchor</span>
          </div>
          <div class="pillar-tab" data-pillar="daily">
            <span class="pillar-tab-icon">&#9681;</span>
            <span class="pillar-tab-label">Daily Pulse</span>
          </div>
          <div class="pillar-tab" data-pillar="weekly">
            <span class="pillar-tab-icon">&#9684;</span>
            <span class="pillar-tab-label">Weekly Whisper</span>
          </div>
          <div class="pillar-tab" data-pillar="persona">
            <span class="pillar-tab-icon">&#9671;</span>
            <span class="pillar-tab-label">Persona Shift</span>
          </div>
          <div class="pillar-tab" data-pillar="mcp">
            <span class="pillar-tab-icon">&#11043;</span>
            <span class="pillar-tab-label">MCP Actions</span>
          </div>
        </div>
      </section>

      <!-- Pillars Detail Section -->
      <section class="pillars-section" id="pillars">
        <div class="pillars-section-header">
          <h2>The Five Pillars</h2>
          <p>A layered memory architecture that creates NPCs with depth, continuity, and emergent behavior</p>
        </div>
        <div class="pillars-grid">
          <div class="pillar-detail" data-pillar="core">
            <div class="pillar-detail-icon">&#9672;</div>
            <span class="pillar-detail-tag">Permanent</span>
            <h3>Core Anchor</h3>
            <p>Immutable psychological DNA. Backstory, principles, and worldview that define the character's foundation and never change.</p>
          </div>
          <div class="pillar-detail" data-pillar="daily">
            <div class="pillar-detail-icon">&#9681;</div>
            <span class="pillar-detail-tag">Per Session</span>
            <h3>Daily Pulse</h3>
            <p>Mood vectors and single-sentence takeaways. Emotional continuity across short timespans with valence, arousal, dominance.</p>
          </div>
          <div class="pillar-detail" data-pillar="weekly">
            <div class="pillar-detail-icon">&#9684;</div>
            <span class="pillar-detail-tag">Cycles</span>
            <h3>Weekly Whisper</h3>
            <p>Cyclic memory pruning with salience scoring. High-impact events persist while trivial interactions naturally fade.</p>
          </div>
          <div class="pillar-detail" data-pillar="persona">
            <div class="pillar-detail-icon">&#9671;</div>
            <span class="pillar-detail-tag">Evolution</span>
            <h3>Persona Shift</h3>
            <p>Major personality recalibration. Big Five traits evolve within bounded limits based on accumulated experiences.</p>
          </div>
          <div class="pillar-detail" data-pillar="mcp">
            <div class="pillar-detail-icon">&#11043;</div>
            <span class="pillar-detail-tag">Agency</span>
            <h3>MCP Actions</h3>
            <p>NPCs act in the world. Lock doors, call guards, refuse service. Real consequences from autonomous decisions.</p>
          </div>
        </div>
      </section>

      <!-- Voice Pipeline -->
      <section class="section" id="pipeline">
        <div class="container">
          <h2 class="section-title">Real-Time Voice Pipeline</h2>
          <p class="section-subtitle">Sub-100ms time-to-first-audio with streaming at every stage</p>

          <div class="pipeline-diagram">
            <div class="pipeline-stage">
              <div class="stage-icon">&#127908;</div>
              <div class="stage-label">Client Audio</div>
              <div class="stage-detail">VAD-filtered</div>
            </div>
            <div class="pipeline-arrow">&#8594;</div>
            <div class="pipeline-stage">
              <div class="stage-icon">&#9671;</div>
              <div class="stage-label">Deepgram STT</div>
              <div class="stage-detail">WebSocket</div>
            </div>
            <div class="pipeline-arrow">&#8594;</div>
            <div class="pipeline-stage stage-security">
              <div class="stage-icon">&#11043;</div>
              <div class="stage-label">Security</div>
              <div class="stage-detail">Sanitize + Moderate</div>
            </div>
            <div class="pipeline-arrow">&#8594;</div>
            <div class="pipeline-stage stage-llm">
              <div class="stage-icon">&#9670;</div>
              <div class="stage-label">Gemini LLM</div>
              <div class="stage-detail">Streaming</div>
            </div>
            <div class="pipeline-arrow">&#8594;</div>
            <div class="pipeline-stage">
              <div class="stage-icon">&#9672;</div>
              <div class="stage-label">Cartesia TTS</div>
              <div class="stage-detail">40ms latency</div>
            </div>
            <div class="pipeline-arrow">&#8594;</div>
            <div class="pipeline-stage">
              <div class="stage-icon">&#128266;</div>
              <div class="stage-label">Audio Out</div>
              <div class="stage-detail">Client Speaker</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Features Grid -->
      <section class="section section-dark" id="features">
        <div class="container">
          <h2 class="section-title">Built for Game Developers</h2>
          <p class="section-subtitle">Everything you need to create believable, memorable NPCs</p>

          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-icon">&#9672;</div>
              <h3>Transient Sessions</h3>
              <p>RAM during conversation, persist only on end. No database writes during chat for maximum performance.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">&#9671;</div>
              <h3>State History</h3>
              <p>Git-like versioning for NPC states. Rollback personality or memories if something goes wrong.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">&#11043;</div>
              <h3>Knowledge Tiers</h3>
              <p>NPCs know different things at different depths. Shopkeepers don't know royal secrets.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">&#9684;</div>
              <h3>Salience Scoring</h3>
              <p>Emotionally significant events persist. Trivia fades like real human memories.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">&#9681;</div>
              <h3>Mood Vectors</h3>
              <p>Valence, arousal, dominance. Mathematical moods that influence behavior and dialogue.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">&#9733;</div>
              <h3>MCP Tools</h3>
              <p>NPCs can act. Call guards, lock doors, refuse service. Real consequences in your game world.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- CTA -->
      <section class="section section-cta">
        <div class="container">
          <h2>Ready to create memorable NPCs?</h2>
          <p>Start with a project. No signup required.</p>
          <button class="btn btn-primary btn-lg" id="btn-cta-create">
            <span class="icon">+</span>
            Create Your First Project
          </button>
        </div>
      </section>

      <!-- Footer -->
      <footer class="footer">
        <div class="container">
          <div class="footer-grid">
            <div class="footer-brand">
              <div class="footer-brand-header">
                <img src="/img/icon.png" alt="SoulEngine" class="brand-icon-img">
                <span class="brand-text">Soul<span class="brand-accent">Engine</span></span>
              </div>
              <p>NPCs with memory, motive, and agency. Stateless intelligence with layered psychological cycles.</p>
              <div class="footer-social-links">
                <a href="https://github.com/PranavMishra17/SoulEngine" target="_blank" rel="noopener" class="footer-social-link" title="GitHub">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                </a>
                <a href="https://github.com/sponsors/PranavMishra17" target="_blank" rel="noopener" class="footer-social-link" title="Sponsor">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                </a>
              </div>
            </div>
            <div class="footer-links">
              <h4>Resources</h4>
              <a href="https://github.com/PranavMishra17/SoulEngine" target="_blank" rel="noopener">GitHub Repository</a>
              <a href="https://github.com/PranavMishra17/SoulEngine#readme" target="_blank" rel="noopener">Documentation</a>
              <a href="https://github.com/PranavMishra17/SoulEngine/issues" target="_blank" rel="noopener">Report Issues</a>
            </div>
            <div class="footer-links">
              <h4>Product</h4>
              <a href="#pillars">Five Pillars</a>
              <a href="#pipeline">Voice Pipeline</a>
              <a href="#features">Features</a>
            </div>
            <div class="footer-links">
              <h4>Developer</h4>
              <a href="https://portfolio-pranav-mishra-paranoid.vercel.app" target="_blank" rel="noopener">Portfolio</a>
              <a href="https://www.linkedin.com/in/pranavgamedev" target="_blank" rel="noopener">LinkedIn</a>
              <a href="https://scholar.google.com/citations?hl=en&user=_Twn_owAAAAJ" target="_blank" rel="noopener">Publications</a>
              <a href="https://huggingface.co/Paranoiid" target="_blank" rel="noopener">Hugging Face</a>
            </div>
          </div>
          <div class="footer-bottom">
            <p>Built by <a href="https://portfolio-pranav-mishra-paranoid.vercel.app" target="_blank" rel="noopener">Pranav Mishra</a>. Open source under ISC license.</p>
            <div class="footer-bottom-links">
              <a href="https://github.com/PranavMishra17/SoulEngine/blob/main/LICENSE" target="_blank" rel="noopener">License</a>
              <a href="https://github.com/sponsors/PranavMishra17" target="_blank" rel="noopener">Support Development</a>
            </div>
          </div>
          <!-- Warning Banner -->
          <div class="footer-warning">
            <p class="warning-title">‚ö†Ô∏è BEWARE ‚ö†Ô∏è</p>
            <p class="warning-text">They remember. They change. They act.</p>
          </div>
        </div>
      </footer>
    </div>
  </template>

  <template id="template-projects">
    <div class="projects-page">
      <header class="page-header">
        <div class="page-header-content">
          <h1>Projects</h1>
          <p>Manage your NPC projects</p>
        </div>
        <div class="page-header-actions">
          <button class="btn btn-primary" id="btn-new-project">
            <span class="icon">+</span>
            New Project
          </button>
        </div>
      </header>
      <div class="projects-grid" id="projects-grid"></div>
      <div class="empty-state" id="empty-projects" style="display: none;">
        <div class="empty-icon">&#9643;</div>
        <h3>No projects yet</h3>
        <p>Create your first project to start building NPCs</p>
        <button class="btn btn-primary" id="btn-empty-create">
          <span class="icon">+</span>
          Create Project
        </button>
      </div>
    </div>
  </template>

  <template id="template-dashboard">
    <div class="dashboard-page">
      <header class="page-header">
        <div class="page-header-content">
          <div class="breadcrumb">
            <a href="/projects">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <span id="project-name">Project</span>
          </div>
          <h1 id="dashboard-title">Project Dashboard</h1>
        </div>
        <div class="page-header-actions">
          <!-- API Keys Status Badge -->
          <span class="api-status api-status-warning" id="api-status">
            <span class="status-icon">!</span>
            <span class="status-text">API Keys Not Set</span>
          </span>
          
          <!-- Project ID Display -->
          <div class="project-id-display">
            <span class="project-id-label">ID:</span>
            <code id="project-id-masked">proj_****</code>
            <button class="btn btn-ghost btn-sm" id="btn-copy-project-id" title="Copy Project ID">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="copy-icon">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
          </div>
          
          <button class="btn btn-ghost btn-sm" id="btn-refresh-dashboard" title="Refresh Dashboard">
            <span class="icon">&#8635;</span>
          </button>
          <button class="btn btn-outline" id="btn-project-settings">
            <span class="icon">&#9881;</span>
            Settings
          </button>
        </div>
      </header>
      
      <!-- Dashboard Boards -->
      <div class="dashboard-boards">
        <!-- NPCs Board -->
        <a href="#" class="board-card" id="board-npcs">
          <div class="board-header">
            <div class="board-icon board-icon-npc">&#9671;</div>
            <div class="board-title">
              <h3>NPCs</h3>
              <span class="board-count" id="npc-count">0</span>
            </div>
            <span class="board-arrow">&#8594;</span>
          </div>
          <div class="board-grid" id="npc-grid">
            <div class="board-empty">No NPCs created yet</div>
          </div>
        </a>
        
        <!-- World Knowledge Board -->
        <a href="#" class="board-card" id="board-knowledge">
          <div class="board-header">
            <div class="board-icon board-icon-knowledge">&#9672;</div>
            <div class="board-title">
              <h3>World Knowledge</h3>
              <span class="board-count" id="knowledge-count">0</span>
            </div>
            <span class="board-arrow">&#8594;</span>
          </div>
          <div class="board-grid" id="knowledge-grid">
            <div class="board-empty">No categories defined</div>
          </div>
        </a>
        
        <!-- MCP Tools Board -->
        <a href="#" class="board-card" id="board-mcp">
          <div class="board-header">
            <div class="board-icon board-icon-mcp">&#11043;</div>
            <div class="board-title">
              <h3>MCP Tools</h3>
              <span class="board-count" id="mcp-count">0</span>
            </div>
            <span class="board-arrow">&#8594;</span>
          </div>
          <div class="board-content" id="mcp-content">
            <div class="board-empty">No tools defined</div>
          </div>
        </a>
      </div>
      
      <!-- Starter Pack Section -->
      <div class="starter-pack-section" id="starter-pack-section">
        <div class="starter-pack-card">
          <div class="starter-pack-icon">&#127775;</div>
          <div class="starter-pack-content">
            <h3>Starter Pack Available</h3>
            <p>Load example content to explore the system: 5 interconnected NPCs, 6 knowledge categories, and 15 MCP tools - all set in the "Stellar Haven" sci-fi space station.</p>
            <button class="btn btn-primary" id="btn-load-starter-pack">
              <span class="icon">&#10148;</span>
              Load Examples
            </button>
          </div>
        </div>
      </div>
      
      <!-- Stats Section -->
      <div class="dashboard-stats">
        <h2 class="stats-title">Project Metrics</h2>
        <div class="stats-grid">
          <div class="stat-card stat-card-sm">
            <div class="stat-icon stat-icon-instances">&#9684;</div>
            <div class="stat-content">
              <span class="stat-value" id="stat-instances">0</span>
              <span class="stat-label">NPC Instances</span>
            </div>
          </div>
          <div class="stat-card stat-card-sm">
            <div class="stat-icon stat-icon-entries">&#9672;</div>
            <div class="stat-content">
              <span class="stat-value" id="stat-entries">0</span>
              <span class="stat-label">Knowledge Entries</span>
            </div>
          </div>
          <div class="stat-card stat-card-sm">
            <div class="stat-icon stat-icon-conv">&#9681;</div>
            <div class="stat-content">
              <span class="stat-value" id="stat-conv-tools">0</span>
              <span class="stat-label">Conversation Tools</span>
            </div>
          </div>
          <div class="stat-card stat-card-sm">
            <div class="stat-icon stat-icon-game">&#11043;</div>
            <div class="stat-content">
              <span class="stat-value" id="stat-game-tools">0</span>
              <span class="stat-label">Game Event Tools</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Structure Flowchart -->
      <div class="dashboard-flowchart">
        <h2 class="flowchart-title">Project Structure</h2>
        <div class="flowchart-container">
          <div class="flowchart-v2">
            <!-- Row 1: Project -->
            <div class="flow-row flow-row-project">
              <div class="flow-node-v2 flow-node-project-v2">
                <div class="flow-node-icon-v2">&#9733;</div>
                <div class="flow-node-content">
                  <div class="flow-node-label-v2">Project</div>
                </div>
              </div>
            </div>
            
            <!-- Connector: Project to Resources -->
            <div class="flow-connector-v2">
              <div class="flow-line-v flow-line-split"></div>
            </div>
            
            <!-- Row 2: Knowledge Base & MCP Tools (Project Resources) -->
            <div class="flow-row flow-row-resources">
              <div class="flow-node-v2 flow-node-knowledge-v2">
                <div class="flow-node-icon-v2">&#9672;</div>
                <div class="flow-node-content">
                  <div class="flow-node-label-v2">Knowledge Base</div>
                  <div class="flow-node-sub-label">Categories / Depth Tiers</div>
                </div>
                <div class="flow-node-count-v2" id="flow-knowledge-count">0</div>
              </div>
              
              <div class="flow-node-v2 flow-node-mcp-v2">
                <div class="flow-node-icon-v2">&#11043;</div>
                <div class="flow-node-content">
                  <div class="flow-node-label-v2">MCP Tools</div>
                  <div class="flow-node-sub-label">Conv / Game Events</div>
                </div>
                <div class="flow-node-count-v2" id="flow-tools-count">0</div>
              </div>
            </div>
            
            <!-- Connector: Resources to NPCs -->
            <div class="flow-connector-v2">
              <div class="flow-line-v flow-line-merge"></div>
              <div class="flow-derive-label">NPCs derive from</div>
            </div>
            
            <!-- Row 3: NPCs -->
            <div class="flow-row flow-row-npcs">
              <div class="flow-node-v2 flow-node-npcs-v2">
                <div class="flow-node-icon-v2">&#9671;</div>
                <div class="flow-node-content">
                  <div class="flow-node-label-v2">NPCs</div>
                  <div class="flow-node-sub-label">Character Definitions</div>
                </div>
                <div class="flow-node-count-v2" id="flow-npc-count">0</div>
              </div>
            </div>
            
            <!-- Connector: NPCs to Instances -->
            <div class="flow-connector-v2">
              <div class="flow-line-v"></div>
            </div>
            
            <!-- Row 4: NPC Grid -->
            <div class="flow-row flow-row-npc-grid">
              <div class="npc-instances-grid" id="flow-npc-grid">
                <div class="npc-instance-placeholder">
                  <span class="npc-placeholder-icon">&#9671;</span>
                  <span class="npc-placeholder-label">NPC 1</span>
                </div>
                <div class="npc-instance-placeholder">
                  <span class="npc-placeholder-icon">&#9671;</span>
                  <span class="npc-placeholder-label">NPC 2</span>
                </div>
                <div class="npc-instance-placeholder npc-placeholder-more">
                  <span class="npc-placeholder-icon">...</span>
                  <span class="npc-placeholder-label">NPC n</span>
                </div>
              </div>
            </div>
            
            <!-- Connector: NPC Instance to Components -->
            <div class="flow-connector-v2">
              <div class="flow-line-v flow-line-expand"></div>
              <div class="flow-derive-label">Each NPC contains</div>
            </div>
            
            <!-- Row 5: NPC Components -->
            <div class="flow-row flow-row-components">
              <div class="flow-node-v2 flow-node-component">
                <div class="flow-node-icon-v2">&#9672;</div>
                <div class="flow-node-label-v2">Knowledge Tier</div>
                <div class="flow-node-hint">Selective access</div>
              </div>
              <div class="flow-node-v2 flow-node-component">
                <div class="flow-node-icon-v2">&#11043;</div>
                <div class="flow-node-label-v2">MCP Tool Set</div>
                <div class="flow-node-hint">Permissions</div>
              </div>
              <div class="flow-node-v2 flow-node-component">
                <div class="flow-node-icon-v2">&#128101;</div>
                <div class="flow-node-label-v2">Social Network</div>
                <div class="flow-node-hint">NPC relationships</div>
              </div>
              <div class="flow-node-v2 flow-node-component">
                <div class="flow-node-icon-v2">&#9829;</div>
                <div class="flow-node-label-v2">Personality</div>
                <div class="flow-node-hint">Schedule + Cycles</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Quick Access -->
      <div class="dashboard-quick-access">
        <a href="#" class="quick-btn" id="link-playground">
          <span class="quick-icon">&#9654;</span>
          <span class="quick-label">Open Playground</span>
        </a>
      </div>
    </div>
  </template>

  <template id="template-npc-list">
    <div class="npc-list-page">
      <header class="page-header">
        <div class="page-header-content">
          <div class="breadcrumb">
            <a href="/projects">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <a href="#" id="breadcrumb-project">Project</a>
            <span class="breadcrumb-sep">/</span>
            <span>NPCs</span>
          </div>
          <h1>NPC Definitions</h1>
        </div>
        <div class="page-header-actions">
          <button class="btn btn-primary" id="btn-create-npc">
            <span class="icon">+</span>
            Create NPC
          </button>
        </div>
      </header>
      <div class="npc-grid" id="npc-grid"></div>
      <div class="empty-state" id="empty-npcs" style="display: none;">
        <div class="empty-icon">&#9671;</div>
        <h3>No NPCs defined</h3>
        <p>Create your first NPC definition</p>
        <button class="btn btn-primary" id="btn-empty-create-npc">
          <span class="icon">+</span>
          Create NPC
        </button>
      </div>
    </div>
  </template>

  <template id="template-npc-editor">
    <div class="npc-editor-page">
      <header class="page-header">
        <div class="page-header-content">
          <div class="breadcrumb">
            <a href="/projects">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <a href="#" id="breadcrumb-project">Project</a>
            <span class="breadcrumb-sep">/</span>
            <a href="#" id="breadcrumb-npcs">NPCs</a>
            <span class="breadcrumb-sep">/</span>
            <span id="breadcrumb-npc">New NPC</span>
          </div>
          <h1 id="editor-title">Create NPC</h1>
        </div>
        <div class="page-header-actions">
          <button class="btn btn-ghost" id="btn-edit-npc-json" title="Edit Raw JSON">
            <span class="icon">{ }</span> Edit JSON
          </button>
          <button class="btn btn-ghost" id="btn-download-template" title="Download NPC template">
            <span class="icon">&#8595;</span> NPC Template
          </button>
          <button class="btn btn-ghost" id="btn-import-npc" title="Import from JSON">
            <span class="icon">&#8593;</span> Import
          </button>
          <button class="btn btn-ghost" id="btn-export-npc" title="Export to JSON">
            <span class="icon">&#8595;</span> Export
          </button>
          <button class="btn btn-outline" id="btn-cancel">Cancel</button>
          <button class="btn btn-primary" id="btn-save-npc">
            <span class="icon">&#10003;</span> Save NPC
          </button>
        </div>
      </header>
      <div class="editor-layout">
        <aside class="editor-sidebar">
          <nav class="editor-nav">
            <a href="#section-basic" class="editor-nav-item active" data-section="basic">
              <span class="nav-icon">&#9671;</span> Basic Info
            </a>
            <a href="#section-anchor" class="editor-nav-item" data-section="anchor">
              <span class="nav-icon">&#9672;</span> Core Anchor
            </a>
            <a href="#section-personality" class="editor-nav-item" data-section="personality">
              <span class="nav-icon">&#9684;</span> Personality
            </a>
            <a href="#section-voice" class="editor-nav-item" data-section="voice">
              <span class="nav-icon">&#128266;</span> Voice
            </a>
            <a href="#section-knowledge" class="editor-nav-item" data-section="knowledge">
              <span class="nav-icon">&#9681;</span> Knowledge Access
            </a>
            <a href="#section-schedule" class="editor-nav-item" data-section="schedule">
              <span class="nav-icon">&#9687;</span> Schedule & State
            </a>
            <a href="#section-tools" class="editor-nav-item" data-section="tools">
              <span class="nav-icon">&#11043;</span> MCP Tools
            </a>
            <a href="#section-network" class="editor-nav-item" data-section="network">
              <span class="nav-icon">&#11042;</span> Network
            </a>
          </nav>
        </aside>
        <div class="editor-content">
          <section class="editor-section active" id="section-basic">
            <h2>Basic Information</h2>
            <div class="form-group">
              <label for="npc-name">Name</label>
              <input type="text" id="npc-name" class="input" placeholder="e.g., Elara the Innkeeper">
            </div>
            <div class="form-group">
              <label for="npc-description">Description</label>
              <textarea id="npc-description" class="input textarea" rows="3" placeholder="A brief description of this NPC..."></textarea>
              <span class="input-hint">For your reference only - not visible to NPC or included in their context.</span>
            </div>
            <div class="form-group">
              <label>Profile Picture</label>
              <div class="profile-upload-area" id="profile-upload-area">
                <input type="file" id="npc-profile-input" accept="image/png,image/jpeg,image/webp,image/gif" hidden>
                <div class="profile-preview" id="profile-preview">
                  <span class="placeholder-icon">&#128100;</span>
                </div>
                <div class="profile-actions">
                  <button type="button" class="btn btn-outline btn-sm" id="btn-upload-profile">
                    <span class="icon">&#8593;</span> Upload
                  </button>
                  <button type="button" class="btn btn-ghost btn-sm" id="btn-remove-profile" style="display: none;" title="Remove">
                    <span class="icon">&#128465;</span>
                  </button>
                </div>
                <span class="input-hint">Max 1MB. PNG, JPG, WebP, or GIF. For UI display only.</span>
              </div>
            </div>
          </section>
          <section class="editor-section" id="section-anchor">
            <h2>Core Anchor</h2>
            <p class="section-desc">Immutable psychological DNA. This never changes after creation.</p>
            <div class="form-group">
              <div class="form-label-row">
                <label for="anchor-backstory">Backstory</label>
                <button type="button" class="btn btn-sm btn-outline" id="btn-generate-backstory">
                  <span class="icon">‚ú®</span> Generate with AI
                </button>
              </div>
              <textarea id="anchor-backstory" class="input textarea code" rows="6" placeholder="100-200 tokens encoding the character's fundamental worldview..."></textarea>
              <span class="input-hint">This should capture childhood context and core experiences that shape their perspective.</span>
            </div>
            <div class="form-group">
              <div class="form-label-row">
                <label>Principles</label>
                <button type="button" class="btn btn-sm btn-ghost" id="btn-generate-principles">
                  <span class="icon">‚ú®</span> AI Assist
                </button>
              </div>
              <div class="tag-input-container">
                <div class="tag-input-tags" id="principles-tags"></div>
                <input type="text" id="principle-input" class="input tag-input" placeholder="Add a principle and press Enter">
              </div>
              <span class="input-hint">3-5 unbreakable beliefs</span>
            </div>
            <div class="form-group">
              <div class="form-label-row">
                <label>Trauma Flags</label>
                <button type="button" class="btn btn-sm btn-ghost" id="btn-generate-trauma">
                  <span class="icon">‚ú®</span> AI Assist
                </button>
              </div>
              <div class="tag-input-container">
                <div class="tag-input-tags" id="trauma-tags"></div>
                <input type="text" id="trauma-input" class="input tag-input" placeholder="Add a trauma flag and press Enter">
              </div>
              <span class="input-hint">Narrative tracking only</span>
            </div>
          </section>
          <section class="editor-section" id="section-personality">
            <h2>Personality Baseline</h2>
            <p class="section-desc">Big Five personality traits. These can drift slightly over time.</p>
            <div class="form-group">
              <label for="personality-preset">Personality Template</label>
              <select id="personality-preset" class="input select">
                <option value="">Custom (manual adjustment)</option>
                <option value="warm_friendly">Warm & Friendly</option>
                <option value="reserved_sweet">Reserved & Sweet</option>
                <option value="short_tempered">Short-Tempered</option>
                <option value="volatile_unpredictable">Volatile & Unpredictable</option>
                <option value="honorable_principled">Honorable & Principled</option>
                <option value="curious_intellectual">Curious & Intellectual</option>
                <option value="cautious_anxious">Cautious & Anxious</option>
                <option value="bold_confident">Bold & Confident</option>
              </select>
            </div>
            <div class="personality-sliders">
              <div class="slider-group">
                <div class="slider-header"><label>Openness</label><span class="slider-value" id="val-openness">0.5</span></div>
                <div class="slider-labels"><span>Practical</span><span>Curious</span></div>
                <input type="range" id="trait-openness" class="slider" min="0" max="1" step="0.05" value="0.5">
              </div>
              <div class="slider-group">
                <div class="slider-header"><label>Conscientiousness</label><span class="slider-value" id="val-conscientiousness">0.5</span></div>
                <div class="slider-labels"><span>Spontaneous</span><span>Organized</span></div>
                <input type="range" id="trait-conscientiousness" class="slider" min="0" max="1" step="0.05" value="0.5">
              </div>
              <div class="slider-group">
                <div class="slider-header"><label>Extraversion</label><span class="slider-value" id="val-extraversion">0.5</span></div>
                <div class="slider-labels"><span>Reserved</span><span>Outgoing</span></div>
                <input type="range" id="trait-extraversion" class="slider" min="0" max="1" step="0.05" value="0.5">
              </div>
              <div class="slider-group">
                <div class="slider-header"><label>Agreeableness</label><span class="slider-value" id="val-agreeableness">0.5</span></div>
                <div class="slider-labels"><span>Challenging</span><span>Cooperative</span></div>
                <input type="range" id="trait-agreeableness" class="slider" min="0" max="1" step="0.05" value="0.5">
              </div>
              <div class="slider-group">
                <div class="slider-header"><label>Neuroticism</label><span class="slider-value" id="val-neuroticism">0.5</span></div>
                <div class="slider-labels"><span>Stable</span><span>Sensitive</span></div>
                <input type="range" id="trait-neuroticism" class="slider" min="0" max="1" step="0.05" value="0.5">
              </div>
            </div>
            <div class="personality-summary" id="personality-summary"></div>
            
            <div class="memory-retention-section">
              <h3>Memory Retention</h3>
              <p class="section-desc">How well does this NPC remember conversations? Higher retention means more detailed memories and summaries.</p>
              <div class="slider-group memory-slider">
                <div class="slider-header">
                  <label>Memory Retention</label>
                  <span class="slider-value" id="val-memory-retention">50%</span>
                </div>
                <div class="slider-labels"><span>üß† Forgetful</span><span>üß† Sharp Memory</span></div>
                <input type="range" id="memory-retention" class="slider" min="0" max="100" step="5" value="50">
                <p class="memory-hint" id="memory-hint">Average memory - remembers significant events</p>
              </div>
            </div>
          </section>
          <section class="editor-section" id="section-voice">
            <h2>Voice Configuration</h2>
            <div class="form-group">
              <label for="voice-provider">TTS Provider</label>
              <select id="voice-provider" class="input select">
                <option value="cartesia">Cartesia (Default)</option>
                <option value="elevenlabs">ElevenLabs</option>
              </select>
            </div>
            <div class="form-group">
              <label for="voice-select">Voice</label>
              <div class="voice-select-container">
                <select id="voice-select" class="input select"><option value="">Select a voice...</option></select>
                <button type="button" class="btn btn-sm btn-outline" id="btn-refresh-voices" title="Refresh">&#8635;</button>
              </div>
              <span class="input-hint" id="voice-hint">
                <span id="voice-loading" style="display: none;">Loading voices...</span>
                <span id="voice-error" style="display: none; color: var(--color-error);"></span>
                <a href="#" id="link-voice-library" target="_blank" rel="noopener">Browse voice library</a>
              </span>
            </div>
            <div class="form-group">
              <label for="voice-speed">Speed</label>
              <div class="slider-header"><span class="slider-value" id="val-voice-speed">1.0x</span></div>
              <input type="range" id="voice-speed" class="slider" min="0.5" max="2" step="0.1" value="1">
            </div>
            <button class="btn btn-outline" id="btn-preview-voice" disabled>
              <span class="icon">&#9654;</span> Preview Voice
            </button>
            <audio id="voice-preview-audio" style="display: none;"></audio>
          </section>
          <section class="editor-section" id="section-knowledge">
            <h2>Knowledge Access</h2>
            <p class="section-desc">What does this NPC know? Set depth levels per category.</p>
            <div class="knowledge-cards" id="knowledge-cards">
              <!-- Dynamically populated knowledge cards -->
            </div>
            <div class="knowledge-empty" id="knowledge-empty" style="display: none;">
              <p>No knowledge categories assigned.</p>
            </div>
            <div class="knowledge-actions">
              <button type="button" class="btn btn-primary" id="btn-add-knowledge">
                <span class="icon">+</span> Add Knowledge
              </button>
              <a href="#" id="link-create-knowledge" class="btn btn-ghost btn-sm">
                Manage Categories
              </a>
            </div>
            <div class="knowledge-add-dropdown" id="knowledge-add-dropdown" style="display: none;">
              <div class="dropdown-header">
                <span>Select Category</span>
                <button type="button" class="btn btn-ghost btn-sm" id="btn-close-knowledge-dropdown">&#10005;</button>
              </div>
              <div class="dropdown-list" id="knowledge-category-list">
                <!-- Dynamically populated available categories -->
              </div>
            </div>
          </section>
          <section class="editor-section" id="section-schedule">
            <h2>Schedule & Default State</h2>
            <p class="section-desc">Optional settings for the NPC's routine and starting emotional state.</p>
            <div class="form-group">
              <label for="default-mood">Default Mood</label>
              <select id="default-mood" class="input select">
                <option value="">Not set (use neutral)</option>
                <option value="neutral">Neutral</option>
                <option value="happy">Happy</option>
                <option value="sad">Sad</option>
                <option value="angry">Angry</option>
                <option value="fearful">Fearful</option>
                <option value="excited">Excited</option>
                <option value="tired">Tired</option>
                <option value="content">Content</option>
              </select>
            </div>
            <div class="form-group">
              <label>Daily Schedule</label>
              <div id="schedule-blocks"></div>
              <button type="button" class="btn btn-sm btn-outline" id="btn-add-schedule">
                <span class="icon">+</span> Add Time Block
              </button>
            </div>
          </section>
          <section class="editor-section" id="section-tools">
            <h2>MCP Tools</h2>
            <p class="section-desc">Which MCP tools can this NPC use?</p>
            
            <div class="tools-category-section">
              <div class="tools-category-header">
                <h3>Conversation Tools</h3>
                <span class="tools-category-hint">NPC decides when to use these</span>
              </div>
              <div class="tool-pills" id="conv-tool-pills">
                <!-- Dynamically populated pills -->
              </div>
              <button type="button" class="btn btn-outline btn-sm" id="btn-add-conv-tool">
                <span class="icon">+</span> Add Tool
              </button>
              <div class="tool-add-dropdown" id="conv-tool-dropdown" style="display: none;">
                <div class="dropdown-list" id="conv-tool-list"></div>
              </div>
            </div>
            
            <div class="tools-category-section">
              <div class="tools-category-header">
                <h3>Game Event Tools</h3>
                <span class="tools-category-hint">Game logic triggers these</span>
              </div>
              <div class="tool-pills" id="game-tool-pills">
                <!-- Dynamically populated pills -->
              </div>
              <button type="button" class="btn btn-outline btn-sm" id="btn-add-game-tool">
                <span class="icon">+</span> Add Tool
              </button>
              <div class="tool-add-dropdown" id="game-tool-dropdown" style="display: none;">
                <div class="dropdown-list" id="game-tool-list"></div>
              </div>
            </div>
            
            <div class="tools-manage-link">
              <a href="#" id="link-manage-tools" class="btn btn-ghost btn-sm">Manage Tools</a>
            </div>
          </section>
          <section class="editor-section" id="section-network">
            <h2>NPC Network & Recognition</h2>
            <p class="section-desc">Who does this NPC know? Add connections to other NPCs and configure player recognition.</p>
            
            <!-- Player Recognition (consolidated from separate section) -->
            <div class="network-header-options">
              <label class="checkbox-item">
                <input type="checkbox" id="reveal-player-identity" checked>
                <span>NPC can recognize players by name</span>
              </label>
              <span class="input-hint">When enabled, player name/info is included in NPC's context at session start</span>
            </div>
            
            <h3 style="margin-top: var(--space-6); margin-bottom: var(--space-3);">NPC Connections</h3>
            
            <div class="network-connections" id="network-connections">
              <!-- Dynamically populated connection cards -->
            </div>
            
            <div class="network-empty" id="network-empty" style="display: none;">
              <p>No connections added yet.</p>
            </div>
            
            <div class="network-actions">
              <button type="button" class="btn btn-primary" id="btn-add-connection">
                <span class="icon">+</span> Add Connection
              </button>
              <span class="network-count" id="network-count">0 / 20</span>
              <label class="checkbox-item network-bidirectional">
                <input type="checkbox" id="network-bidirectional" checked>
                <span>Two-way</span>
              </label>
            </div>
            
            <div class="network-add-dropdown" id="network-add-dropdown" style="display: none;">
              <div class="dropdown-header">
                <span>Select NPC</span>
                <button type="button" class="btn btn-ghost btn-sm" id="btn-close-network-dropdown">&#10005;</button>
              </div>
              <div class="dropdown-list" id="network-npc-list">
                <!-- Dynamically populated available NPCs -->
              </div>
            </div>
            
            <div class="network-tiers-legend">
              <div class="tier-legend-item"><span class="tier-badge tier-1">1</span><div><strong>Acquaintance</strong><p>Knows name and description</p></div></div>
              <div class="tier-legend-item"><span class="tier-badge tier-2">2</span><div><strong>Familiar</strong><p>Also knows backstory</p></div></div>
              <div class="tier-legend-item"><span class="tier-badge tier-3">3</span><div><strong>Close</strong><p>Also knows personality</p></div></div>
            </div>
          </section>
        </div>
        <aside class="editor-preview">
          <div class="preview-header">
            <h3>Live Preview</h3>
            <button class="btn btn-sm btn-ghost" id="btn-toggle-preview"><span class="icon">&#9680;</span></button>
          </div>
          <div class="preview-content">
            <div class="preview-avatar"><span class="avatar-placeholder">&#9671;</span></div>
            <h4 id="preview-name">NPC Name</h4>
            <p id="preview-description" class="preview-description">Description will appear here...</p>
            
            <!-- Interactive Personality Traits (visible when editing personality) -->
            <div class="preview-traits-interactive" id="preview-traits-interactive" style="display: none;">
              <h5>Personality Traits</h5>
              <div class="preview-slider-group">
                <div class="preview-slider-row">
                  <span class="trait-label">O</span>
                  <input type="range" class="preview-slider" id="preview-openness" min="0" max="1" step="0.05" value="0.5">
                  <span class="trait-val" id="pval-openness">0.5</span>
                </div>
                <div class="preview-slider-row">
                  <span class="trait-label">C</span>
                  <input type="range" class="preview-slider" id="preview-conscientiousness" min="0" max="1" step="0.05" value="0.5">
                  <span class="trait-val" id="pval-conscientiousness">0.5</span>
                </div>
                <div class="preview-slider-row">
                  <span class="trait-label">E</span>
                  <input type="range" class="preview-slider" id="preview-extraversion" min="0" max="1" step="0.05" value="0.5">
                  <span class="trait-val" id="pval-extraversion">0.5</span>
                </div>
                <div class="preview-slider-row">
                  <span class="trait-label">A</span>
                  <input type="range" class="preview-slider" id="preview-agreeableness" min="0" max="1" step="0.05" value="0.5">
                  <span class="trait-val" id="pval-agreeableness">0.5</span>
                </div>
                <div class="preview-slider-row">
                  <span class="trait-label">N</span>
                  <input type="range" class="preview-slider" id="preview-neuroticism" min="0" max="1" step="0.05" value="0.5">
                  <span class="trait-val" id="pval-neuroticism">0.5</span>
                </div>
              </div>
              <div class="preview-mood-select">
                <label>Default Mood</label>
                <select id="preview-default-mood" class="input select">
                  <option value="">Neutral</option>
                  <option value="happy">Happy</option>
                  <option value="sad">Sad</option>
                  <option value="angry">Angry</option>
                  <option value="fearful">Fearful</option>
                  <option value="excited">Excited</option>
                  <option value="tired">Tired</option>
                  <option value="content">Content</option>
                </select>
              </div>
            </div>
            
            <!-- Static Personality Display (shown for other tabs) -->
            <div class="preview-traits" id="preview-traits-static">
              <h5>Personality</h5>
              <div class="trait-bars" id="preview-traits"></div>
            </div>
            <div class="preview-mood" id="preview-mood-static">
              <h5>Default Mood</h5>
              <div class="mood-indicator" id="preview-mood"><span class="mood-valence">Neutral</span></div>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </template>

  <template id="template-knowledge">
    <div class="knowledge-page">
      <header class="page-header">
        <div class="page-header-content">
          <div class="breadcrumb">
            <a href="/projects">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <a href="#" id="breadcrumb-project">Project</a>
            <span class="breadcrumb-sep">/</span>
            <span>Knowledge Base</span>
          </div>
          <h1>Knowledge Base</h1>
        </div>
        <div class="page-header-actions">
          <button class="btn btn-ghost" id="btn-edit-raw-json" title="Edit Raw JSON"><span class="icon">{ }</span> Edit JSON</button>
          <button class="btn btn-ghost" id="btn-download-kb-template" title="Download template"><span class="icon">&#8595;</span> Template</button>
          <button class="btn btn-ghost" id="btn-import-knowledge" title="Import"><span class="icon">&#8593;</span> Import</button>
          <button class="btn btn-ghost" id="btn-export-knowledge" title="Export"><span class="icon">&#8595;</span> Export</button>
        </div>
      </header>
      
      <!-- Inline Category Creation Form -->
      <div class="inline-create-form collapsed" id="inline-create-form">
        <div class="inline-form-header" id="inline-form-toggle">
          <span class="icon">+</span>
          <h3>Add New Category</h3>
        </div>
        <div class="inline-form-body" id="inline-form-body" style="display: none;">
          <div class="inline-form-row">
            <div class="form-group">
              <label for="new-cat-id">Category ID</label>
              <input type="text" id="new-cat-id" class="input" placeholder="e.g., world_history, local_gossip">
              <span class="input-hint">Lowercase letters, numbers, underscores. Starts with letter.</span>
            </div>
            <div class="form-group">
              <label for="new-cat-depth">Initial Depths</label>
              <select id="new-cat-depth" class="input select">
                <option value="1">1 depth level</option>
                <option value="2">2 depth levels</option>
                <option value="3" selected>3 depth levels</option>
                <option value="4">4 depth levels</option>
                <option value="5">5 depth levels</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="new-cat-desc">Description</label>
            <textarea id="new-cat-desc" class="input textarea" rows="2" placeholder="What kind of knowledge does this category contain?"></textarea>
          </div>
          <div class="inline-form-actions">
            <button class="btn btn-outline" id="btn-cancel-create">Cancel</button>
            <button class="btn btn-primary" id="btn-confirm-create"><span class="icon">+</span> Create Category</button>
          </div>
        </div>
      </div>
      
      <div class="knowledge-layout">
        <div class="knowledge-categories" id="knowledge-categories"></div>
        <div class="empty-state" id="empty-knowledge" style="display: none;">
          <div class="empty-icon">&#9672;</div>
          <h3>No knowledge categories</h3>
          <p>Create categories to define what NPCs can know</p>
          <p class="hint">Click "Add New Category" above to get started</p>
        </div>
      </div>
    </div>
  </template>

  <template id="template-mcp-tools">
    <div class="mcp-tools-page">
      <header class="page-header">
        <div class="page-header-content">
          <div class="breadcrumb">
            <a href="/projects">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <a href="#" id="breadcrumb-project">Project</a>
            <span class="breadcrumb-sep">/</span>
            <span>MCP Tools</span>
          </div>
          <h1>MCP Tools</h1>
          <p class="page-subtitle">Define tools that NPCs can use during conversations and game events</p>
        </div>
        <div class="page-header-actions">
          <button class="btn btn-ghost" id="btn-edit-tools-json" title="Edit Raw JSON"><span class="icon">{ }</span> Edit JSON</button>
          <button class="btn btn-ghost" id="btn-download-tools-template" title="Download template"><span class="icon">&#8595;</span> Template</button>
          <button class="btn btn-ghost" id="btn-import-tools" title="Import"><span class="icon">&#8593;</span> Import</button>
          <button class="btn btn-ghost" id="btn-export-tools" title="Export"><span class="icon">&#8595;</span> Export</button>
        </div>
      </header>
      
      <!-- Inline Tool Creation Form -->
      <div class="inline-create-form collapsed" id="inline-tool-form">
        <div class="inline-form-header" id="inline-tool-toggle">
          <span class="icon">+</span>
          <h3>Add New Tool</h3>
        </div>
        <div class="inline-form-body" id="inline-tool-body" style="display: none;">
          <div class="inline-form-row">
            <div class="form-group">
              <label for="new-tool-id">Tool ID</label>
              <input type="text" id="new-tool-id" class="input" placeholder="e.g., lock_door, give_item">
              <span class="input-hint">Unique identifier (snake_case recommended)</span>
            </div>
            <div class="form-group">
              <label for="new-tool-name">Display Name</label>
              <input type="text" id="new-tool-name" class="input" placeholder="e.g., Lock Door">
            </div>
          </div>
          <div class="inline-form-row">
            <div class="form-group">
              <label for="new-tool-type">Tool Type</label>
              <select id="new-tool-type" class="input select">
                <option value="conversation">Conversation Tool</option>
                <option value="game_event">Game Event Tool</option>
              </select>
            </div>
            <div class="form-group">
              <label>&nbsp;</label>
              <span class="input-hint" style="margin-top: 0.5rem; display: block;">Conversation tools are used during dialogue. Game event tools are triggered by game logic.</span>
            </div>
          </div>
          <div class="form-group">
            <label for="new-tool-desc">Description</label>
            <textarea id="new-tool-desc" class="input textarea" rows="2" placeholder="What does this tool do? When should the NPC use it?"></textarea>
            <span class="input-hint">This helps the LLM decide when to use the tool</span>
          </div>
          <div class="inline-form-actions">
            <button class="btn btn-outline" id="btn-cancel-tool">Cancel</button>
            <button class="btn btn-primary" id="btn-confirm-tool"><span class="icon">+</span> Create Tool</button>
          </div>
        </div>
      </div>
      
      <div class="mcp-tools-layout">
        <!-- Conversation Tools Section -->
        <div class="tools-category">
          <div class="tools-category-header">
            <h3>Conversation Tools</h3>
            <span class="tools-category-badge" id="conv-tools-count">0 tools</span>
          </div>
          
          <!-- System Tools -->
          <div class="system-tools-section" id="system-conv-tools">
            <div class="system-tools-header">
              <h4>‚öô System Tools</h4>
              <span class="input-hint">Built-in tools for safety and control</span>
            </div>
            <div class="system-tools-list" id="system-conv-tools-list"></div>
          </div>
          
          <!-- Custom Tools -->
          <div class="custom-tools-grid" id="conversation-tools"></div>
          <div class="empty-state-inline" id="empty-conv-tools" style="display: none;"><p>No custom conversation tools. Add tools using the form above.</p></div>
        </div>
        
        <!-- Game Event Tools Section -->
        <div class="tools-category">
          <div class="tools-category-header">
            <h3>Game Event Tools</h3>
            <span class="tools-category-badge" id="game-tools-count">0 tools</span>
          </div>
          
          <!-- System Tools -->
          <div class="system-tools-section" id="system-game-tools">
            <div class="system-tools-header">
              <h4>‚öô System Tools</h4>
              <span class="input-hint">Built-in tools for common game actions</span>
            </div>
            <div class="system-tools-list" id="system-game-tools-list"></div>
          </div>
          
          <!-- Custom Tools -->
          <div class="custom-tools-grid" id="game-event-tools"></div>
          <div class="empty-state-inline" id="empty-game-tools" style="display: none;"><p>No custom game event tools. Add tools using the form above.</p></div>
        </div>
      </div>
    </div>
  </template>

  <template id="template-settings">
    <div class="settings-page">
      <header class="page-header">
        <div class="page-header-content">
          <div class="breadcrumb">
            <a href="/projects">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <a href="#" id="breadcrumb-project">Project</a>
            <span class="breadcrumb-sep">/</span>
            <span>Settings</span>
          </div>
          <h1>Project Settings</h1>
          <p class="page-subtitle">Configure API keys, providers, and project options</p>
        </div>
      </header>

      <div class="settings-layout">
        <!-- Provider Selection -->
        <section class="settings-card">
          <div class="settings-card-header">
            <h2>AI Providers</h2>
            <p class="settings-card-desc">Select which AI providers to use for this project</p>
          </div>
          <div class="settings-card-body">
            <div class="form-group">
              <label for="settings-llm-provider">LLM Provider</label>
              <select id="settings-llm-provider" class="input select">
                <option value="gemini">Google Gemini</option>
                <option value="openai">OpenAI</option>
                <option value="anthropic">Anthropic Claude</option>
                <option value="grok">xAI Grok</option>
              </select>
              <span class="input-hint">Used for NPC cognition and dialogue generation</span>
            </div>
            <div class="form-group">
              <label for="settings-llm-model">LLM Model</label>
              <select id="settings-llm-model" class="input select">
                <!-- Populated dynamically -->
              </select>
              <span class="input-hint">Specific model to use for conversations</span>
            </div>
            <div class="form-group">
              <label for="settings-tts-provider">TTS Provider</label>
              <select id="settings-tts-provider" class="input select">
                <option value="cartesia">Cartesia (Default)</option>
                <option value="elevenlabs">ElevenLabs</option>
              </select>
              <span class="input-hint">Text-to-speech for voice output</span>
            </div>
            <div class="form-group">
              <label for="settings-stt-provider">STT Provider</label>
              <select id="settings-stt-provider" class="input select">
                <option value="deepgram">Deepgram (Default)</option>
              </select>
              <span class="input-hint">Speech-to-text for voice input</span>
            </div>
          </div>
        </section>

        <!-- LLM API Keys -->
        <section class="settings-card">
          <div class="settings-card-header">
            <h2>LLM API Keys</h2>
            <p class="settings-card-desc">API keys for language model providers</p>
          </div>
          <div class="settings-card-body">
            <div class="form-group">
              <label for="settings-key-gemini">
                Gemini API Key
                <span class="key-status" id="status-gemini"></span>
              </label>
              <div class="input-with-toggle">
                <input type="password" id="settings-key-gemini" class="input" placeholder="Enter API key...">
                <button type="button" class="btn btn-ghost btn-sm btn-toggle-visibility" data-target="settings-key-gemini">
                  <span class="icon">üëÅ</span>
                </button>
              </div>
              <span class="input-hint">Get from <a href="https://aistudio.google.com/apikey" target="_blank">Google AI Studio</a></span>
            </div>
            <div class="form-group">
              <label for="settings-key-openai">
                OpenAI API Key
                <span class="key-status" id="status-openai"></span>
              </label>
              <div class="input-with-toggle">
                <input type="password" id="settings-key-openai" class="input" placeholder="Enter API key...">
                <button type="button" class="btn btn-ghost btn-sm btn-toggle-visibility" data-target="settings-key-openai">
                  <span class="icon">üëÅ</span>
                </button>
              </div>
              <span class="input-hint">Get from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a></span>
            </div>
            <div class="form-group">
              <label for="settings-key-anthropic">
                Anthropic API Key
                <span class="key-status" id="status-anthropic"></span>
              </label>
              <div class="input-with-toggle">
                <input type="password" id="settings-key-anthropic" class="input" placeholder="Enter API key...">
                <button type="button" class="btn btn-ghost btn-sm btn-toggle-visibility" data-target="settings-key-anthropic">
                  <span class="icon">üëÅ</span>
                </button>
              </div>
              <span class="input-hint">Get from <a href="https://console.anthropic.com/settings/keys" target="_blank">Anthropic Console</a></span>
            </div>
            <div class="form-group">
              <label for="settings-key-grok">
                Grok API Key
                <span class="key-status" id="status-grok"></span>
              </label>
              <div class="input-with-toggle">
                <input type="password" id="settings-key-grok" class="input" placeholder="Enter API key...">
                <button type="button" class="btn btn-ghost btn-sm btn-toggle-visibility" data-target="settings-key-grok">
                  <span class="icon">üëÅ</span>
                </button>
              </div>
              <span class="input-hint">Get from <a href="https://x.ai" target="_blank">xAI</a></span>
            </div>
          </div>
        </section>

        <!-- Voice API Keys -->
        <section class="settings-card">
          <div class="settings-card-header">
            <h2>Voice API Keys</h2>
            <p class="settings-card-desc">API keys for speech-to-text and text-to-speech</p>
          </div>
          <div class="settings-card-body">
            <div class="form-group">
              <label for="settings-key-deepgram">
                Deepgram API Key
                <span class="key-status" id="status-deepgram"></span>
              </label>
              <div class="input-with-toggle">
                <input type="password" id="settings-key-deepgram" class="input" placeholder="Enter API key...">
                <button type="button" class="btn btn-ghost btn-sm btn-toggle-visibility" data-target="settings-key-deepgram">
                  <span class="icon">üëÅ</span>
                </button>
              </div>
              <span class="input-hint">Get from <a href="https://console.deepgram.com" target="_blank">Deepgram Console</a> - Required for voice input</span>
            </div>
            <div class="form-group">
              <label for="settings-key-cartesia">
                Cartesia API Key
                <span class="key-status" id="status-cartesia"></span>
              </label>
              <div class="input-with-toggle">
                <input type="password" id="settings-key-cartesia" class="input" placeholder="Enter API key...">
                <button type="button" class="btn btn-ghost btn-sm btn-toggle-visibility" data-target="settings-key-cartesia">
                  <span class="icon">üëÅ</span>
                </button>
              </div>
              <span class="input-hint">Get from <a href="https://play.cartesia.ai" target="_blank">Cartesia</a> - Default TTS provider</span>
            </div>
            <div class="form-group">
              <label for="settings-key-elevenlabs">
                ElevenLabs API Key
                <span class="key-status" id="status-elevenlabs"></span>
              </label>
              <div class="input-with-toggle">
                <input type="password" id="settings-key-elevenlabs" class="input" placeholder="Enter API key...">
                <button type="button" class="btn btn-ghost btn-sm btn-toggle-visibility" data-target="settings-key-elevenlabs">
                  <span class="icon">üëÅ</span>
                </button>
              </div>
              <span class="input-hint">Get from <a href="https://elevenlabs.io" target="_blank">ElevenLabs</a> - Alternative TTS provider</span>
            </div>
          </div>
        </section>

        <!-- Project Info -->
        <section class="settings-card">
          <div class="settings-card-header">
            <h2>Project Information</h2>
            <p class="settings-card-desc">Basic project details</p>
          </div>
          <div class="settings-card-body">
            <div class="form-group">
              <label for="settings-project-name">Project Name</label>
              <input type="text" id="settings-project-name" class="input" placeholder="My Game Project">
            </div>
            <div class="form-group">
              <label>Project ID</label>
              <div class="input-with-button">
                <input type="text" id="settings-project-id" class="input" readonly>
                <button type="button" class="btn btn-sm btn-outline" id="btn-copy-project-id">Copy</button>
              </div>
              <span class="input-hint">Use this ID when integrating with your game</span>
            </div>
          </div>
        </section>

        <!-- Danger Zone -->
        <section class="settings-card settings-card-danger">
          <div class="settings-card-header">
            <h2>Danger Zone</h2>
            <p class="settings-card-desc">Irreversible actions</p>
          </div>
          <div class="settings-card-body">
            <div class="danger-action">
              <div class="danger-action-info">
                <h3>Delete Project</h3>
                <p>Permanently delete this project and all its NPCs, knowledge, and data.</p>
              </div>
              <button class="btn btn-danger" id="btn-delete-project">Delete Project</button>
            </div>
          </div>
        </section>
      </div>

      <!-- Save Bar -->
      <div class="settings-save-bar">
        <span class="save-bar-hint">Changes are saved when you click Save</span>
        <button class="btn btn-primary btn-lg" id="btn-save-settings">
          <span class="icon">&#10003;</span> Save Settings
        </button>
      </div>
    </div>
  </template>

  <template id="template-playground">
    <div class="playground-page">
      <header class="page-header compact">
        <div class="page-header-content">
          <div class="breadcrumb">
            <a href="/projects">Projects</a>
            <span class="breadcrumb-sep">/</span>
            <a href="#" id="breadcrumb-project">Project</a>
            <span class="breadcrumb-sep">/</span>
            <span>Playground</span>
          </div>
          <h1>Testing Playground</h1>
        </div>
      </header>
      <div class="playground-layout">
        <aside class="playground-sidebar">
          <div class="sidebar-section">
            <h3>Select NPC</h3>
            <select id="npc-select" class="input select"><option value="">Choose an NPC...</option></select>
          </div>
          <div class="sidebar-section" id="npc-info-panel" style="display: none;">
            <h3>NPC Info</h3>
            <div class="npc-info-card">
              <div class="npc-avatar">&#9671;</div>
              <h4 id="info-npc-name">NPC Name</h4>
              <p id="info-npc-description">Description</p>
            </div>
            <div class="mood-control">
              <h4>Starting Mood</h4>
              <select id="starting-mood" class="input select">
                <option value="neutral">Neutral</option>
                <option value="happy">Happy</option>
                <option value="sad">Sad</option>
                <option value="angry">Angry</option>
                <option value="fearful">Fearful</option>
                <option value="excited">Excited</option>
                <option value="tired">Tired</option>
                <option value="content">Content</option>
              </select>
            </div>
            <div class="task-control">
              <h4>Current Task</h4>
              <select id="current-task" class="input select">
                <option value="idle">Idle</option>
                <option value="working">Working</option>
                <option value="trading">Trading</option>
                <option value="patrolling">Patrolling</option>
                <option value="resting">Resting</option>
                <option value="socializing">Socializing</option>
                <option value="custom">Custom...</option>
              </select>
              <input type="text" id="custom-task" class="input" placeholder="Describe the task..." style="display: none; margin-top: var(--space-2);">
            </div>
          </div>
          <div class="sidebar-section" id="session-panel" style="display: none;">
            <h3>Active Session</h3>
            <div class="session-info">
              <div class="session-stat"><span class="stat-label">Session ID</span><code id="session-id-display">-</code></div>
              <div class="session-stat"><span class="stat-label">Messages</span><span id="message-count">0</span></div>
            </div>
            <div class="current-mood">
              <h4>Current Mood</h4>
              <div class="mood-display" id="current-mood-display"><span class="mood-emoji">&#128528;</span><span class="mood-label">Neutral</span></div>
            </div>
            <button class="btn btn-outline btn-block" id="btn-end-session"><span class="icon">&#9632;</span> End Session</button>
          </div>
          <div class="sidebar-section" id="cycles-panel" style="display: none;">
            <div class="section-header-with-info">
              <h3>Memory Cycles</h3>
              <button class="btn btn-ghost btn-xs" id="btn-cycles-info" title="What are cycles?">?</button>
            </div>
            <p class="cycles-hint">Run between sessions only</p>
            <div class="cycle-buttons">
              <button class="btn btn-outline btn-sm btn-block" id="btn-daily-pulse" disabled><span class="icon">&#9681;</span> Daily Pulse</button>
              <button class="btn btn-outline btn-sm btn-block" id="btn-weekly-whisper" disabled><span class="icon">&#9684;</span> Weekly Whisper</button>
              <button class="btn btn-outline btn-sm btn-block" id="btn-persona-shift" disabled><span class="icon">&#9671;</span> Persona Shift</button>
            </div>
            <button class="btn btn-ghost btn-sm btn-block" id="btn-view-mind" disabled style="margin-top: var(--space-3);"><span class="icon">&#9672;</span> View NPC Mind</button>
          </div>
        </aside>
        <main class="playground-main">
          <div class="chat-container">
            <div class="session-setup-panel" id="session-setup-panel">
              <div class="conversation-mode-selector">
                <h4>Conversation Mode</h4>
                <div class="mode-grid">
                  <button class="mode-option active" data-input="text" data-output="text">
                    <span class="mode-icon">‚å®Ô∏è ‚Üí üìù</span>
                    <span class="mode-label">TEXT-TO-TEXT</span>
                  </button>
                  <button class="mode-option" data-input="voice" data-output="voice">
                    <span class="mode-icon">üé§ ‚Üí üîä</span>
                    <span class="mode-label">VOICE-TO-VOICE</span>
                  </button>
                  <button class="mode-option" data-input="text" data-output="voice">
                    <span class="mode-icon">‚å®Ô∏è ‚Üí üîä</span>
                    <span class="mode-label">TEXT-TO-VOICE</span>
                  </button>
                  <button class="mode-option" data-input="voice" data-output="text">
                    <span class="mode-icon">üé§ ‚Üí üìù</span>
                    <span class="mode-label">VOICE-TO-TEXT</span>
                  </button>
                </div>
              </div>
              <div class="player-setup">
                <input type="text" id="player-name" class="input" placeholder="Player Character Name (optional)">
                <label class="checkbox-item">
                  <input type="checkbox" id="enable-player-recognition">
                  <span>NPC recognizes player by name</span>
                </label>
              </div>
              <button class="btn btn-primary btn-block" id="btn-start-session"><span class="icon">&#9654;</span> Start Session</button>
            </div>
            <div class="chat-messages" id="chat-messages">
              <div class="chat-placeholder"><div class="placeholder-icon">&#9681;</div><p>Select an NPC and start a session to begin chatting</p></div>
            </div>
            <div class="chat-input-area" id="chat-input-area" style="display: none;">
              <div class="input-mode-toggle">
                <button class="mode-btn active" data-mode="text" id="mode-text"><span class="icon">&#9000;</span> Text</button>
                <button class="mode-btn" data-mode="voice" id="mode-voice"><span class="icon">&#127908;</span> Voice</button>
              </div>
              <div class="text-input-container" id="text-input-container">
                <textarea id="message-input" class="input textarea" rows="2" placeholder="Type a message..."></textarea>
                <button class="btn btn-primary" id="btn-send"><span class="icon">&#8593;</span></button>
              </div>
              <div class="voice-input-container" id="voice-input-container" style="display: none;">
                <div class="voice-live-indicator">
                  <div class="vad-indicator" id="vad-indicator"><span class="vad-dot"></span><span class="vad-label">Listening</span></div>
                  <div class="voice-visualizer" id="voice-visualizer">
                    <div class="visualizer-bars"><span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span><span class="bar"></span></div>
                  </div>
                </div>
                <div class="voice-controls">
                  <button class="btn btn-voice" id="btn-voice-toggle"><span class="icon">&#127908;</span><span class="label">Start Live Voice</span></button>
                  <button class="btn btn-ghost btn-sm" id="btn-voice-interrupt" title="Interrupt"><span class="icon">&#9209;</span></button>
                </div>
                <div class="voice-status" id="voice-status">Ready</div>
                <p class="voice-hint">Voice is live - just speak naturally.</p>
              </div>
            </div>
          </div>
        </main>
        <aside class="playground-xray" id="xray-panel">
          <div class="xray-header">
            <h3>X-Ray Mode</h3>
            <button class="btn btn-sm btn-ghost" id="btn-toggle-xray"><span class="icon">&#9680;</span></button>
          </div>
          <div class="xray-content">
            <div class="xray-section">
              <h4>Pipeline Trace</h4>
              <div class="pipeline-trace" id="pipeline-trace">
                <div class="trace-step" data-step="stt">STT</div>
                <div class="trace-step" data-step="security">Security</div>
                <div class="trace-step" data-step="context">Context</div>
                <div class="trace-step" data-step="llm">LLM</div>
                <div class="trace-step" data-step="tts">TTS</div>
              </div>
            </div>
            <div class="xray-section">
              <h4>Tool Calls</h4>
              <div class="tool-calls-log" id="tool-calls-log"><p class="log-empty">No tool calls yet</p></div>
            </div>
            <div class="xray-section">
              <h4>Memory Access</h4>
              <div class="memory-access-log" id="memory-access-log"><p class="log-empty">No memories accessed</p></div>
            </div>
            <div class="xray-section">
              <h4>Security Events</h4>
              <div class="security-log" id="security-log"><p class="log-empty">No security events</p></div>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </template>

  <template id="template-modal">
    <div class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h2 class="modal-title"></h2>
          <button class="btn btn-ghost modal-close"><span class="icon">&#10005;</span></button>
        </div>
        <div class="modal-body"></div>
        <div class="modal-footer"></div>
      </div>
    </div>
  </template>

  <!-- Scripts -->
  <script type="module" src="/js/api.js"></script>
  <script type="module" src="/js/router.js"></script>
  <script type="module" src="/js/components.js"></script>
  <script type="module" src="/js/pages/landing.js"></script>
  <script type="module" src="/js/pages/projects.js"></script>
  <script type="module" src="/js/pages/dashboard.js"></script>
  <script type="module" src="/js/pages/npc-editor.js"></script>
  <script type="module" src="/js/pages/knowledge.js"></script>
  <script type="module" src="/js/pages/mcp-tools.js"></script>
  <script type="module" src="/js/pages/playground.js"></script>
  <script type="module" src="/js/app.js"></script>
</body>
</html>